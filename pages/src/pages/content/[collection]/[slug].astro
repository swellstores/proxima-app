---
import { SwellStorefrontRecord } from '../../../swell/api';
import ThemePage from '../../../components/ThemePage.astro';
import { getContentModel } from '../../../swell/content';

const { collection, slug } = Astro.params;
---

<ThemePage
  id="content/index"
  required="entry.id"
  title="{{ entry.meta_title | default: entry.title | default: entry.name }}"
  description="{{ entry.meta_description | default: entry.description }}"
  getData={async (swell: Swell, theme: SwellTheme) => {
    const model = await getContentModel(swell, collection);
    const entry = new SwellStorefrontRecord(
      swell,
      `content/${collection}`,
      slug,
      theme.page?.query
    );

    return {
      model,
      entry,
    };
  }}
/>
