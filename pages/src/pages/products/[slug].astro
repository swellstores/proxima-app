---
import ThemePage from "@/components/ThemePage.astro";
import { PageNotFound } from "@/swell/theme";
import { getProduct } from "@/swell/products";

const { slug } = Astro.params;
---

<ThemePage
	id="products/product"
	getData={async (swell, theme) => {
		const product = await getProduct(swell, slug as string, theme.page?.query);

		if (product) {
			return {
				product,
				title: product.meta_title || product.name,
				description: product.meta_description || product.description,
				theme_template: product.theme_template
			};
		}

		throw new PageNotFound('Product not found');
	}}
/>