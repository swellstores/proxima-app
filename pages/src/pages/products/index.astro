---
import { SwellStorefrontCollection, StorefrontResource } from '@/swell/api';
import ThemePage from '../../components/ThemePage.astro';
---

<ThemePage
  id="products/index"
  title="Catalog"
  getData={async (swell: Swell, theme: SwellTheme) => {
    const products = new SwellStorefrontCollection(
      swell,
      'products',
      theme.page?.query
    );

    const filters = new StorefrontResource(() => {
      return swell.storefront.products.filters(products);
    });

    return {
      products,
      filters,
    };
  }}
/>
