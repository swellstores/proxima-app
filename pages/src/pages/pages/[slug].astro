---
import ThemePage from "@/components/ThemePage.astro";
import { PageNotFound } from "@/swell/theme";
import { getPage } from "@/swell/content";

const { slug } = Astro.params;
---

<ThemePage
	id="pages/page"
	getData={async (swell, theme) => {
		const page = await getPage(swell, slug as string, theme.page?.query);

		if (page) {
			return {
				page,
				title: page.meta_title || page.name,
				description: page.meta_description || page.description,
				theme_template: page.theme_template
			};
		}

		throw new PageNotFound('Page not found');
	}}
/>