---
import { Swell } from "@/swell/api";
import { SwellTheme } from "@/swell/theme";
import ThemePage from "@/components/ThemePage.astro";
import { PageNotFound } from "@/swell/theme";
import { getCategory } from "@/swell/categories";

const { slug } = Astro.params;
---

<ThemePage
	id="categories/category"
	getData={async (swell: Swell, theme: SwellTheme) => {
		const product = await getCategory(swell, slug as string, theme.page?.query);

		if (product) {
			return {
				product,
				title: product.meta_title || product.name,
				description: product.meta_description || product.description,
				theme_template: product.theme_template
			};
		}

		throw new PageNotFound('Product not found');
	}}
/>
